{"name": "LM_Tree_Grphs_Lab_py", "extension": ".py", "course": "MPM01", "st_mode": 33204, "st_ino": 13100112, "st_dev": 16777233, "st_nlink": 1, "st_uid": 501, "st_gid": 20, "st_size": 2921, "st_atime": 1759510056.772015, "st_mtime": 1759493998.0, "st_ctime": 1759510056.2406485, "st_birthtime": 1759493998.0, "st_blocks": 8, "st_blksize": 4096, "content": "## Load packages\nimport pandas as pd\nimport statsmodels.api as sm\nimport statsmodels.formula.api as smf\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# Getting data\n\n# Load the data\nd_trees = pd.read_csv(\"../../Datasets/TreesChamagne2017_Lab_modified.csv\",\n                      sep = ';', decimal = ',')\n\n# rename variables because \".\" causes problems in R\nd_trees.rename(columns = {'growth.rate': 'growth_rate'}, inplace = True)\nd_trees.rename(columns = {'diversity.site': 'diversity_site'}, inplace = True)\nd_trees.rename(columns = {'density.site': 'density_site'}, inplace = True)\n\n# Inspect the data\nprint(d_trees.info())\nprint(d_trees.head())\n\nplt.clf()\n# ----graphDiversitySite----\nsns.scatterplot(x = 'diversity_site', y = 'growth_rate', data = d_trees)\n\n## This is needed only if you run line by line.\n## If you compile the document to a PDF, it is not needed.\nplt.show()\n\nplt.clf()\n# ----graphDiversitySiteWithRegrLine----\nsns.lmplot(x = 'diversity_site', y = 'growth_rate', data = d_trees, ci = 95)\n\nplt.show()\n\nplt.clf()\n# ----graphDiversitySiteWithSmoother----\nsns.regplot(x = 'diversity_site', y = 'growth_rate', data = d_trees,\n           lowess = True)\n## CI are not supported when lowess = True\n\nplt.show()\n\nplt.clf()\n# ----graphDensity----\nsns.lmplot(x = 'density_site', y = 'growth_rate', data = d_trees, lowess = True)\n\nplt.show()\n\nplt.clf()\n# ----graphAge----\nsns.lmplot(x = 'age', y = 'growth_rate', data = d_trees, lowess = True)\n\nplt.show()\n\n# ----GraphSpecies----\nsns.boxplot(x = 'species', y = 'growth_rate', data = d_trees)\n\nplt.show()\n\nplt.clf()\n# ----graphDiversityGrouped----\nsns.lmplot(x = 'diversity_site', y = 'growth_rate', hue = 'species',\n    data = d_trees, lowess = True, scatter_kws = {'alpha': 0.7}\n)\n\nplt.show()\n\nplt.clf()\n# ----graphDiversityPanelling----\ng = sns.FacetGrid(d_trees, col = 'species')\ng.map_dataframe(sns.scatterplot, x = 'diversity_site', y = 'growth_rate')\ng.map_dataframe(sns.regplot, x = 'diversity_site', y = 'growth_rate', \n                scatter = False, ci = None, lowess = True)\n\nplt.show()\n\nplt.clf()\n# ----graphDiversityPanellingRegressionLines----\ng = sns.FacetGrid(d_trees, col = 'species')\ng.map_dataframe(sns.scatterplot, x = 'diversity_site', y = 'growth_rate')\ng.map_dataframe(sns.regplot, x = 'diversity_site', y = 'growth_rate', \n                scatter = False, ci = 95)\n\nplt.show()\n\nplt.clf()\n# ----lm0----\nlm_trees_0 = smf.ols(\n    'growth_rate ~ species + age + density_site + diversity_site + species:age + species:density_site + species:diversity_site',\n    data = d_trees\n).fit()\nprint(lm_trees_0.summary())\n\nanova = sm.stats.anova_lm(lm_trees_0)\nprint(anova)\n\n# ----drop1InteractionLm0----\nlm_trees_1 = smf.ols(\n    'growth_rate ~ species + age + density_site + diversity_site + species:age + species:density_site',\n    data = d_trees\n).fit()\nprint(lm_trees_1.summary())\n\nanova_1 = sm.stats.anova_lm(lm_trees_1)\nprint(anova_1)\n"}